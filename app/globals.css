@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Light theme variables */
    --color-bg-primary: 255, 255, 255; /* White */
    --color-bg-secondary: 247, 249, 252; /* Light Gray */
    --color-bg-tertiary: 237, 242, 247; /* Lighter Gray */
    
    --color-text-primary: 15, 23, 42; /* Dark Blue */
    --color-text-secondary: 71, 85, 105; /* Slate */
    --color-text-muted: 148, 163, 184; /* Light Slate */
    
    --color-accent-primary: 79, 70, 229; /* Indigo */
    --color-accent-secondary: 139, 92, 246; /* Purple */
    --color-accent-muted: 199, 210, 254; /* Light Purple */
    
    --color-border: 226, 232, 240; /* Very Light Gray */
    --color-shadow: 0, 0, 0; /* Black for shadow */
  }

  .dark {
    /* Dark theme variables - updated for a darker look */
    --color-bg-primary: 10, 15, 30; /* Darker blue-black */
    --color-bg-secondary: 17, 24, 39; /* Darker background */
    --color-bg-tertiary: 31, 41, 55; /* Darker slate */
    
    --color-text-primary: 248, 250, 252; /* Off White */
    --color-text-secondary: 203, 213, 225; /* Light Gray */
    --color-text-muted: 148, 163, 184; /* Slate */
    
    --color-accent-primary: 139, 92, 246; /* Purple */
    --color-accent-secondary: 167, 139, 250; /* Brighter purple for better contrast */
    --color-accent-muted: 91, 33, 182; /* Deeper purple */
    
    --color-border: 45, 55, 72; /* Darker border */
    --color-shadow: 0, 0, 0; /* Black for shadow */
  }
  
  html {
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
  }
  
  body {
    width: 100%;
    height: 100%;
    overflow-x: hidden;
  }
}

@layer components {
  /* Main layout */
  .main-container {
    @apply flex min-h-screen flex-1 flex-col items-center bg-bg-primary px-4 pb-10 pt-28 max-md:pb-32 md:px-6 lg:px-10 transition-colors duration-300;
    background-image: linear-gradient(to bottom, 
      rgb(var(--color-bg-primary)), 
      rgb(var(--color-bg-secondary)));
  }

  /* Head Text */
  .head-text {
    @apply text-heading4-bold md:text-heading3-bold lg:text-heading2-bold text-text-primary mb-6;
  }

  /* Cards */
  .card {
    @apply rounded-xl bg-bg-primary border border-border shadow-sm p-4 md:p-6 transition-all duration-300;
  }

  /* Thread card */
  .thread-card {
    @apply card hover:shadow-md w-full box-border;
    max-width: 100%;
  }
  
  .thread-card_bar {
    @apply relative mt-2 w-0.5 grow rounded-full bg-border;
  }

  /* Navigation */
  .topbar {
    @apply fixed top-0 z-30 flex w-full items-center justify-between bg-bg-primary/80 backdrop-blur-md border-b border-border px-4 py-3 md:px-6 md:py-4 transition-colors duration-300;
  }

  .sidebar {
    @apply fixed left-0 top-0 z-20 hidden md:flex h-screen flex-col justify-between overflow-auto border-r border-border bg-bg-primary pt-28 pb-5 transition-colors duration-300;
    width: 240px;
  }
  
  .sidebar_link {
    @apply flex items-center gap-3 rounded-lg px-4 py-3 text-text-secondary hover:bg-bg-tertiary transition-colors duration-200;
  }
  
  .sidebar_link.active {
    @apply bg-accent-primary/10 text-accent-primary font-medium;
  }

  .bottombar {
    @apply fixed bottom-0 z-10 w-full bg-bg-primary/90 backdrop-blur-md border-t border-border p-2 md:p-4 transition-colors duration-300;
  }

  .bottombar-container {
    @apply flex justify-between items-center w-full max-w-md mx-auto;
  }

  .bottombar-link {
    @apply flex flex-col items-center p-2 rounded-lg transition-colors;
  }

  .bottombar-icon {
    @apply w-6 h-6 md:w-5 md:h-5;
  }

  .bottombar-text {
    @apply text-xs mt-1;
  }

  /* Buttons */
  .btn-primary {
    @apply px-4 py-2 rounded-lg bg-accent-primary text-white font-medium hover:bg-accent-secondary transition-colors duration-200;
  }
  
  .btn-secondary {
    @apply px-4 py-2 rounded-lg bg-bg-tertiary text-text-secondary font-medium hover:bg-border transition-colors duration-200;
  }
  
  .btn-icon {
    @apply p-2 rounded-full hover:bg-bg-tertiary transition-colors duration-200;
  }

  /* Forms */
  .input {
    @apply w-full rounded-lg border border-border bg-bg-primary px-4 py-2 text-text-primary outline-none focus:ring-2 focus:ring-accent-primary/50 transition-all duration-200;
  }
  
  .textarea {
    @apply w-full rounded-lg border border-border bg-bg-primary px-4 py-2 text-text-primary outline-none focus:ring-2 focus:ring-accent-primary/50 transition-all duration-200;
  }

  /* User profile */
  .profile-header {
    @apply card mb-6;
  }

  /* Tabs */
  .tab-list {
    @apply flex w-full border-b border-border;
  }
  
  .tab {
    @apply px-4 py-2 font-medium text-text-secondary border-b-2 border-transparent hover:text-text-primary transition-colors duration-200;
  }
  
  .tab.active {
    @apply text-accent-primary border-accent-primary;
  }

  /* Search */
  .searchbar {
    @apply flex items-center gap-2 rounded-lg border border-border bg-bg-primary px-4 py-2 focus-within:ring-2 focus-within:ring-accent-primary/50 transition-all duration-200;
  }
  
  .searchbar_input {
    @apply border-none bg-transparent text-text-primary outline-none placeholder:text-text-muted;
  }

  .rightsidebar {
    @apply hidden xl:flex sticky right-0 top-0 z-20 h-screen flex-col justify-between gap-8 overflow-auto border-l border-border bg-bg-primary px-6 pb-6 pt-28 transition-colors duration-300;
    width: 288px; /* Fixed width for right sidebar */
  }

  /* Layout container - refined for better responsiveness */
  .layout-container {
    @apply flex flex-col md:flex-row w-full;
  }

  /* Content container - improved to prevent overlap */
  .content-container {
    @apply w-full transition-all duration-300;
    width: 100%;
    margin-left: auto;
    margin-right: auto;
    max-width: 100%;
    box-sizing: border-box;
  }

  /* Improved responsive adjustments for different screen sizes */
  @media (min-width: 768px) {
    .content-container {
      width: calc(100% - 240px); /* Adjust for sidebar */
      margin-left: 240px; /* Width of sidebar */
      padding-left: 1rem;
      padding-right: 1rem;
      max-width: 768px; /* Set a reasonable max-width */
    }
  }

  @media (min-width: 1024px) {
    .content-container {
      max-width: 800px;
      padding-left: 2rem;
      padding-right: 2rem;
    }
  }

  @media (min-width: 1280px) {
    .content-container {
      width: calc(100% - 240px - 288px); /* Adjust for both sidebars (sidebar + rightsidebar) */
      max-width: 900px;
    }
  }

  /* Fix image display issues */
  .img-container {
    @apply relative overflow-hidden;
  }

  .img-container img {
    @apply object-cover w-full h-full;
  }
}

/* Custom utilities */
@layer utilities {
  .bg-primary {
    @apply bg-opacity-100 bg-[rgb(var(--color-bg-primary))];
  }
  
  .bg-secondary {
    @apply bg-opacity-100 bg-[rgb(var(--color-bg-secondary))];
  }
  
  .bg-tertiary {
    @apply bg-opacity-100 bg-[rgb(var(--color-bg-tertiary))];
  }
  
  .bg-accent-primary {
    @apply bg-opacity-100 bg-[rgb(var(--color-accent-primary))];
  }
  
  .bg-accent-secondary {
    @apply bg-opacity-100 bg-[rgb(var(--color-accent-secondary))];
  }
  
  .text-primary {
    @apply text-[rgb(var(--color-text-primary))];
  }
  
  .text-secondary {
    @apply text-[rgb(var(--color-text-secondary))];
  }
  
  .text-muted {
    @apply text-[rgb(var(--color-text-muted))];
  }
  
  .text-accent {
    @apply text-[rgb(var(--color-accent-primary))];
  }
  
  .border-color {
    @apply border-[rgb(var(--color-border))];
  }
  
  .focus-ring {
    @apply focus:outline-none focus:ring-2 focus:ring-[rgb(var(--color-accent-primary))] focus:ring-opacity-50;
  }

  /* Responsive utilities */
  .phone-only {
    @apply block md:hidden;
  }

  .tablet-up {
    @apply hidden md:block;
  }

  .desktop-up {
    @apply hidden lg:block;
  }

  .tablet-only {
    @apply hidden md:block lg:hidden;
  }

  .fixed-width-content {
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
  }

  @media (min-width: 768px) {
    .fixed-width-content {
      max-width: calc(100% - 260px);
    }
  }

  @media (min-width: 1280px) {
    .fixed-width-content {
      max-width: calc(100% - 260px - 308px);
    }
  }
}

/* Additional rules to ensure image visibility */
img {
  max-width: 100%;
  height: auto;
  display: block;
}
